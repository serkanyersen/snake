parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"5eKD":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.RETURN=13]="RETURN",e[e.SPACE=32]="SPACE",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.C=67]="C",e[e.G=71]="G",e[e.J=74]="J",e[e.K=75]="K"}(e=exports.keys||(exports.keys={})),exports.SIZE=20,exports.MARGIN=60,exports.SLOWEST=250,exports.FASTEST=0;
},{}],"r8Tc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("./constants");!function(e){e.rand=function(e,t,r){void 0===r&&(r=n.SIZE);var o=Math.floor(Math.random()*(t-e))+e;return o-o%r},e.snap=function(e,t){void 0===t&&(t=n.SIZE);var r=e-e%t,o=r+t;return e-r<=o-e?r:o},e.removeNode=function(e){e.parentNode&&e.parentNode.removeChild(e)},e.bound=function(e,n,t){return Math.max(Math.min(e,t),n)},e.debounce=function(e,n){var t;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout(function(){return e.apply(void 0,r)},n)}}}(e||(e={})),exports.default=e;
},{"./constants":"5eKD"}],"wsKi":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){var t={};e.set=function(e,n){t[e+":"+n]=!0},e.remove=function(e,n){delete t[e+":"+n]},e.has=function(e,n){return!0===t[e+":"+n]},e.get=function(){return t}}(e||(e={})),exports.default=e;
},{}],"YoFF":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./constants"),i=t(require("./Utils")),s=t(require("./Locations")),n=function(){function t(t){var e=t.x,i=t.y,s=t.type,n=void 0===s?"body":s,o=t.direction,h=void 0===o?"RIGHT":o,l=t.next,d=void 0===l?null:l,a=t.prev,r=void 0===a?null:a;this.direction=h,this.type=n,this.x=e,this.y=i,this.el=document.createElement("div"),this.next=d,this.prev=r,this.setType(n),this.setPos(this.x,this.y),document.body.appendChild(this.el)}return t.prototype.bend=function(t){this.direction!==t&&(this.el.className="",this.el.classList.add("cell",this.type,t,t+"-"+this.direction),this.direction=t)},t.prototype.setPos=function(t,e){this.el.style.top=e+"px",this.el.style.left=t+"px",this.applyClass(),"head"!==this.type&&"food"!==this.type&&s.default.set(t,e)},t.prototype.move=function(t,n,o){void 0===o&&(o="RIGHT");var h=t,l=n;t<0?h=i.default.snap(document.body.clientWidth)-e.SIZE:n<0?l=i.default.snap(document.body.clientHeight)-e.SIZE:t>=i.default.snap(document.body.clientWidth)?h=0:n>=i.default.snap(document.body.clientHeight)&&(l=0);var d=this.direction;this.direction=o,this.setPos(h,l),null!==this.next?this.next.move(this.x,this.y,"head"===this.type?this.direction:d):s.default.remove(this.x,this.y),null===this.next&&"body"===this.type&&this.el.classList.add("tail"),null!==this.next&&this.next.x===h&&this.next.y===l&&this.next.el.classList.add("gulp"),null!==this.next&&this.direction!==this.next.direction&&this.el.classList.add(this.direction+"-"+this.next.direction),this.x=h,this.y=l},t.prototype.setType=function(t){this.type=t,this.applyClass()},t.prototype.applyClass=function(){this.el.className="",this.el.classList.add("cell",this.type,this.direction)},t.prototype.remove=function(){i.default.removeNode(this.el),s.default.remove(this.x,this.y),this.next&&(this.next.remove(),this.next=null)},t}();exports.default=n;
},{"./constants":"5eKD","./Utils":"r8Tc","./Locations":"wsKi"}],"OvRI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("./constants");!function(e){var n=[],u=t.keys.RIGHT;e.set=function(e){n.push(e)},e.get=function(){return u},e.pop=function(){return n.length>0&&(u=n.shift()),e.get()},e.flush=function(){n=[],u=t.keys.RIGHT},e.peek=function(){return n.length>0?n[n.length-1]:u}}(e||(e={})),exports.default=e;
},{"./constants":"5eKD"}],"3jKS":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(r,n){function s(e){try{h(o.next(e))}catch(t){n(t)}}function a(e){try{h(o.throw(e))}catch(t){n(t)}}function h(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(s,a)}h((o=o.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var i,o,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(r=2&n[0]?o.return:n[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){s.label=n[1];break}if(6===n[0]&&s.label<r[1]){s.label=r[1],r=n;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(n);break}r[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(a){n=[6,a],o=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./constants"),r=i(require("./Piece")),n=i(require("./Utils")),s=i(require("./Locations")),a=i(require("./Directions")),h=function(){function i(e){this.levels=e,this.food=null,this.length=0,this.highScore=0,this.score=0,this.currentLevel=null,this.moving=!1,this.paused=!1,this.gridVisible=!1,this.debugSpeed=0,this.keyHeld=0,this.noClip=!1,this.head=new r.default({x:80,y:80,type:"head"}),this.tail=this.resetHead(),this.handleFood(),this.setEvents()}return i.prototype.getRandomLevel=function(){return this.levels[Math.floor(Math.random()*this.levels.length)]},i.prototype.resetHead=function(){this.head.next&&(this.head.next.remove(),this.head.next=null);var e=10*o.SIZE+o.SIZE,t=5*o.SIZE,i=this.head;this.head.move(e,t);for(var n=1;n<=10;n+=1)i.next=new r.default({x:e-o.SIZE*n+2,y:t,prev:i}),i=i.next;return i.setType("tail"),i},i.prototype.start=function(){!1===this.moving&&(this.tail=this.resetHead(),this.length=0,this.debugSpeed=0,this.keyHeld=0,this.score=0,a.default.flush(),this.showScore(),this.moving=!0,requestAnimationFrame(this.frame.bind(this)))},i.prototype.over=function(){this.moving=!1,document.querySelector(".score").innerHTML="\n      Game over! Score: "+1e3*this.length+'.\n      <button id="start">Click here to try again.</button>\n    '},i.prototype.getFoodLocation=function(){var e,t=n.default.rand(o.MARGIN,document.body.clientWidth-o.MARGIN,o.SIZE),i=n.default.rand(o.MARGIN,document.body.clientHeight-o.MARGIN,o.SIZE);return s.default.has(t,i)&&(t=(e=this.getFoodLocation())[0],i=e[1]),[t,i]},i.prototype.handleFood=function(){if(null==this.food){var e=this.getFoodLocation(),t=e[0],i=e[1];this.food=new r.default({x:t,y:i,type:"food"})}this.head.x===this.food.x&&this.head.y===this.food.y&&(this.swallowFood(),!1===this.noClip&&(this.length+=1),this.updateScore(),this.showScore())},i.prototype.swallowFood=function(){return e(this,void 0,void 0,function(){var e,i=this;return t(this,function(t){return null==this.food?[2]:(this.tail.next=this.food,this.tail.setType("body"),this.food.prev=this.tail,this.tail=this.food,this.food.setType("tail"),this.food=null,(e=function(t){if(null!==t.next){if(null!==t.prev&&t.prev.el.classList.remove("gulp"),t.el.classList.add("gulp"),i.paused||!i.moving)return;setTimeout(function(){requestAnimationFrame(function(){e(t.next)})},i.getSpeed()/2)}})(this.head.next),[2])})})},i.prototype.getSpeed=function(){var e=130-.5*this.length+this.debugSpeed+this.keyHeld;return n.default.bound(e,o.FASTEST,o.SLOWEST)},i.prototype.updateScore=function(){if(!0===this.noClip)return this.score;var e=this.getSpeed(),t=(o.SLOWEST-e)*this.length,i=n.default.snap(t,500);return i<500&&(i=500),this.score+=i,this.score},i.prototype.showScore=function(){var e=document.querySelector(".score");this.highScore=this.highScore<this.score?this.score:this.highScore,e.innerHTML="\n            Score: "+this.score+", High Score: "+this.highScore+"\n        "},i.prototype.frame=function(){var e,t=this;if(this.moving&&setTimeout(function(){requestAnimationFrame(t.frame.bind(t))},this.getSpeed()),!this.paused){if(s.default.has(this.head.x,this.head.y)&&!1===this.noClip)return this.over();var i=a.default.pop();switch(s.default.remove(this.tail.x,this.tail.y),s.default.set(this.head.x,this.head.y),this.tail.setType("head"),i){case o.keys.RIGHT:this.tail.move(this.head.x+o.SIZE,this.head.y,o.keys[i]);break;case o.keys.LEFT:this.tail.move(this.head.x-o.SIZE,this.head.y,o.keys[i]);break;case o.keys.DOWN:this.tail.move(this.head.x,this.head.y+o.SIZE,o.keys[i]);break;case o.keys.UP:this.tail.move(this.head.x,this.head.y-o.SIZE,o.keys[i])}var r=this.head;e=[this.tail,this.tail.prev],this.head=e[0],this.tail=e[1],this.tail.next=null,this.tail.setType("tail"),r.setType("body"),r.prev=this.head,r.bend(this.head.direction),this.head.prev=null,this.head.next=r,this.head.setType("head"),this.handleFood()}},i.prototype.notBackwards=function(e){var t=a.default.peek();return!(t===o.keys.UP&&e===o.keys.DOWN||t===o.keys.DOWN&&e===o.keys.UP||t===o.keys.LEFT&&e===o.keys.RIGHT||t===o.keys.RIGHT&&e===o.keys.LEFT)},i.prototype.setEvents=function(){var e=this;document.addEventListener("keydown",function(t){switch(t.keyCode){case o.keys.G:e.gridVisible?e.removeGrid():e.drawGrid();break;case o.keys.C:e.noClip=!e.noClip,document.body.classList.toggle("noclip");break;case o.keys.J:e.debugSpeed+=10;break;case o.keys.K:e.debugSpeed-=10;break;case o.keys.SPACE:e.moving?e.paused=!e.paused:e.start(),t.preventDefault();break;case o.keys.RETURN:e.start();break;default:if(t.keyCode>=48&&t.keyCode<=57){var i=t.keyCode-48;0===i?e.currentLevel&&(e.currentLevel.remove(),e.currentLevel=null):i-1 in e.levels&&(e.currentLevel&&e.currentLevel.remove(),e.currentLevel=e.levels[i-1],e.currentLevel.render())}t.keyCode in o.keys&&e.notBackwards(t.keyCode)&&(a.default.peek()!==t.keyCode?a.default.set(t.keyCode):e.keyHeld-=50,t.preventDefault())}}),document.addEventListener("keyup",function(){e.keyHeld=0}),document.addEventListener("click",function(t){"start"===t.target.id&&e.start()}),window.addEventListener("resize",n.default.debounce(function(){e.currentLevel&&(e.currentLevel.remove(),e.currentLevel.render()),e.gridVisible&&(e.removeGrid(),e.drawGrid()),null!==e.food&&(e.food.remove(),e.food=null,e.handleFood())},100))},i.prototype.removeGrid=function(){var e=document.querySelectorAll(".vertical-grid, .horizontal-grid");Array.from(e).forEach(function(e){n.default.removeNode(e)}),this.gridVisible=!1},i.prototype.drawGrid=function(){for(var e=0;e<document.body.clientWidth;e+=o.SIZE){(t=document.createElement("div")).style.top="0px",t.style.left=e+"px",t.classList.add("vertical-grid"),document.body.appendChild(t)}for(e=0;e<document.body.clientHeight;e+=o.SIZE){var t;(t=document.createElement("div")).style.left="0px",t.style.top=e+"px",t.classList.add("horizontal-grid"),document.body.appendChild(t)}this.gridVisible=!0},i}();exports.default=h;
},{"./constants":"5eKD","./Piece":"YoFF","./Utils":"r8Tc","./Locations":"wsKi","./Directions":"OvRI"}],"egjQ":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("./Piece")),o=require("./constants"),r=function(){function t(t){this.generatorFunction=t,this.pieces=[],this.generatorFunction=t}return t.prototype.translate=function(t,e){return[Math.floor(t)*o.SIZE,Math.floor(e)*o.SIZE]},t.prototype.remove=function(){this.pieces.forEach(function(t){t.remove()})},t.prototype.line=function(t,o,r,n){for(var i=Math.abs(r-t),a=Math.abs(n-o),s=t<r?1:-1,u=o<n?1:-1,c=i-a;;){var h=this.translate(t,o),f=h[0],l=h[1];if(this.pieces.push(new e.default({x:f,y:l,type:"wall"})),Math.abs(t-r)<=.5&&Math.abs(o-n)<=.5)break;var p=2*c;p>-a&&(c-=a,t+=s),p<i&&(c+=i,o+=u)}},t.prototype.render=function(){var t=this,e=Math.floor(document.body.clientHeight/o.SIZE),r=Math.floor(document.body.clientWidth/o.SIZE);this.generatorFunction(r,e).forEach(function(e){var o=e[0],r=o[0],n=o[1],i=e[1],a=i[0],s=i[1];t.line(r,n,a,s)})},t}();exports.default=r;
},{"./Piece":"YoFF","./constants":"5eKD"}],"+bSA":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){var r=[t/2,e/2],u=r[0],a=r[1];return[[[3,3],[a-3,3]],[[a+3,3],[e-3,3]],[[e-3,3],[e-3,u-3]],[[e-3,u+3],[e-3,t-3]],[[e-3,t-3],[a+3,t-3]],[[a-3,t-3],[3,t-3]],[[3,t-3],[3,u+3]],[[3,u-3],[3,3]]]});
},{"../Level":"egjQ"}],"m4lW":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){var r=[e/2,t/2],u=r[0],a=r[1];return[[[u-2,a],[u+2,a]],[[u,a-2],[u,a+2]],[[u-8,a-8],[u-3,a-3]],[[u+3,a+3],[u+8,a+8]],[[u+8,a-8],[u+3,a-3]],[[u-3,a+3],[u-8,a+8]]]});
},{"../Level":"egjQ"}],"R4XU":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){var r=[e/2,t/2],u=r[0],a=r[1];return[[[3,3],[u-3,3]],[[u+3,3],[e-3,3]],[[e-3,3],[e-3,a-3]],[[e-3,a+3],[e-3,t-3]],[[e-3,t-3],[u+3,t-3]],[[u-3,t-3],[3,t-3]],[[3,t-3],[3,a+3]],[[3,a-3],[3,3]],[[9,9],[u-6,9]],[[u+6,9],[e-9,9]],[[e-9,9],[e-9,a-6]],[[e-9,a+6],[e-9,t-9]],[[e-9,t-9],[u+6,t-9]],[[u-6,t-9],[9,t-9]],[[9,t-9],[9,a+6]],[[9,a-6],[9,9]]]});
},{"../Level":"egjQ"}],"EN1T":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){return[[[3,3],[e-3,t-3]],[[e-3,3],[3,t-3]]]});
},{"../Level":"egjQ"}],"7QCb":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var l=e(require("./Game")),r=e(require("./levels/level-1")),t=e(require("./levels/level-2")),u=e(require("./levels/level-3")),a=e(require("./levels/level-4"));exports.default=new l.default([r.default,t.default,u.default,a.default]);
},{"./Game":"3jKS","./levels/level-1":"+bSA","./levels/level-2":"m4lW","./levels/level-3":"R4XU","./levels/level-4":"EN1T"}]},{},["7QCb"], null)
//# sourceMappingURL=src.3297a2c6.js.map